{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/lib/api.ts"],"sourcesContent":["const API_BASE = process.env.NEXT_PUBLIC_API_URL || \"\";\n\nasync function fetchAPI<T>(path: string, options?: RequestInit): Promise<T> {\n  const res = await fetch(`${API_BASE}${path}`, {\n    ...options,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...options?.headers,\n    },\n  });\n  if (!res.ok) {\n    const error = await res.json().catch(() => ({ detail: res.statusText }));\n    throw new Error(error.detail || \"API request failed\");\n  }\n  return res.json();\n}\n\n// Types\nexport interface SelectorConfig {\n  class: string;\n  alias: string;\n  activate: boolean;\n  params: Record<string, unknown>;\n}\n\nexport interface SellStrategyConfig {\n  description: string;\n  name: string;\n  combination_logic?: string;\n  strategies?: Array<{\n    class: string;\n    params: Record<string, unknown>;\n  }>;\n  class?: string;\n  params?: Record<string, unknown>;\n}\n\nexport interface BacktestPayload {\n  name?: string;\n  start_date: string;\n  end_date: string;\n  initial_capital?: number;\n  max_positions?: number;\n  position_sizing?: string;\n  commission_rate?: number;\n  stamp_tax_rate?: number;\n  slippage_rate?: number;\n  sell_strategy_name?: string;\n  sell_strategy_config?: unknown;\n  buy_config?: unknown;\n  stock_pool?: { type: string; codes?: string[] };\n  lookback_days?: number;\n}\n\nexport interface BacktestSummary {\n  id: string;\n  name: string;\n  status: \"PENDING\" | \"RUNNING\" | \"COMPLETED\" | \"FAILED\" | \"CANCELLED\";\n  progress: number;\n  created_at: string;\n  started_at: string | null;\n  finished_at: string | null;\n  start_date: string;\n  end_date: string;\n  metrics: Record<string, number> | null;\n  error: string | null;\n}\n\nexport interface BacktestDetail extends BacktestSummary {\n  payload: BacktestPayload | null;\n  result: BacktestResult | null;\n  logs: Array<{ ts: string; message: string }>;\n}\n\nexport interface BacktestResult {\n  equity_curve: Array<Record<string, unknown>>;\n  trades: Array<Record<string, unknown>>;\n  analysis: Record<string, unknown>;\n  performance?: Record<string, unknown>;\n  strategy_score: { score: number; components: Record<string, number> };\n  best_trade: Record<string, unknown> | null;\n  best_stock: { code: string; net_pnl: number } | null;\n}\n\nexport interface Template {\n  id: string;\n  name: string;\n  created_at: string;\n  payload: BacktestPayload;\n}\n\nexport interface CandleData {\n  time: string;\n  open: number;\n  high: number;\n  low: number;\n  close: number;\n  volume: number;\n}\n\n// API Functions\nexport async function getConfig() {\n  return fetchAPI<{\n    selectors: SelectorConfig[];\n    sell_strategies: Record<string, SellStrategyConfig>;\n  }>(\"/api/config\");\n}\n\nexport async function listBacktests() {\n  return fetchAPI<{ items: BacktestSummary[] }>(\"/api/backtests\");\n}\n\nexport async function createBacktest(payload: BacktestPayload) {\n  return fetchAPI<{ id: string; status: string }>(\"/api/backtests\", {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  });\n}\n\nexport async function getBacktest(id: string) {\n  return fetchAPI<BacktestDetail>(`/api/backtests/${id}`);\n}\n\nexport async function cancelBacktest(id: string) {\n  return fetchAPI<{ id: string; status: string }>(\n    `/api/backtests/${id}/cancel`,\n    { method: \"POST\" }\n  );\n}\n\nexport async function listTemplates() {\n  return fetchAPI<{ items: Template[] }>(\"/api/templates\");\n}\n\nexport async function createTemplate(payload: Record<string, unknown>) {\n  return fetchAPI<{ id: string }>(\"/api/templates\", {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  });\n}\n\nexport async function deleteTemplate(id: string) {\n  return fetchAPI<{ id: string; status: string }>(`/api/templates/${id}`, {\n    method: \"DELETE\",\n  });\n}\n\nexport async function getStockCandles(code: string) {\n  return fetchAPI<{ candles: CandleData[] }>(`/api/stocks/${code}/candles`);\n}\n\nexport async function getRankings(metric = \"score\") {\n  return fetchAPI<{\n    items: Array<{\n      id: string;\n      name: string;\n      created_at: string;\n      metrics: Record<string, number>;\n      rank_value: number;\n    }>;\n  }>(`/api/rankings?metric=${metric}`);\n}\n\nexport async function getBenchmark(name: string, start: string, end: string) {\n  return fetchAPI<{ series: Array<{ date: string; nav: number }> }>(\n    `/api/benchmark?name=${encodeURIComponent(name)}&start=${start}&end=${end}`\n  );\n}\n\nexport async function listCompletedBacktests() {\n  const data = await listBacktests();\n  return {\n    items: data.items.filter((item) => item.status === \"COMPLETED\"),\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAiB;AAAjB,MAAM,WAAW,6DAAmC;AAEpD,eAAe,SAAY,IAAY,EAAE,OAAqB;IAC5D,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC5C,GAAG,OAAO;QACV,SAAS;YACP,gBAAgB;YAChB,GAAG,SAAS,OAAO;QACrB;IACF;IACA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;gBAAE,QAAQ,IAAI,UAAU;YAAC,CAAC;QACtE,MAAM,IAAI,MAAM,MAAM,MAAM,IAAI;IAClC;IACA,OAAO,IAAI,IAAI;AACjB;AAsFO,eAAe;IACpB,OAAO,SAGJ;AACL;AAEO,eAAe;IACpB,OAAO,SAAuC;AAChD;AAEO,eAAe,eAAe,OAAwB;IAC3D,OAAO,SAAyC,kBAAkB;QAChE,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;AACF;AAEO,eAAe,YAAY,EAAU;IAC1C,OAAO,SAAyB,CAAC,eAAe,EAAE,IAAI;AACxD;AAEO,eAAe,eAAe,EAAU;IAC7C,OAAO,SACL,CAAC,eAAe,EAAE,GAAG,OAAO,CAAC,EAC7B;QAAE,QAAQ;IAAO;AAErB;AAEO,eAAe;IACpB,OAAO,SAAgC;AACzC;AAEO,eAAe,eAAe,OAAgC;IACnE,OAAO,SAAyB,kBAAkB;QAChD,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;AACF;AAEO,eAAe,eAAe,EAAU;IAC7C,OAAO,SAAyC,CAAC,eAAe,EAAE,IAAI,EAAE;QACtE,QAAQ;IACV;AACF;AAEO,eAAe,gBAAgB,IAAY;IAChD,OAAO,SAAoC,CAAC,YAAY,EAAE,KAAK,QAAQ,CAAC;AAC1E;AAEO,eAAe,YAAY,SAAS,OAAO;IAChD,OAAO,SAQJ,CAAC,qBAAqB,EAAE,QAAQ;AACrC;AAEO,eAAe,aAAa,IAAY,EAAE,KAAa,EAAE,GAAW;IACzE,OAAO,SACL,CAAC,oBAAoB,EAAE,mBAAmB,MAAM,OAAO,EAAE,MAAM,KAAK,EAAE,KAAK;AAE/E;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM;IACnB,OAAO;QACL,OAAO,KAAK,KAAK,CAAC,MAAM,CAAC,CAAC,OAAS,KAAK,MAAM,KAAK;IACrD;AACF"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/lib/hooks.ts"],"sourcesContent":["import useSWR from \"swr\";\nimport {\n  getConfig,\n  listBacktests,\n  getBacktest,\n  getRankings,\n  listTemplates,\n  getStockCandles,\n  getBenchmark,\n  listCompletedBacktests,\n} from \"./api\";\n\nexport function useConfig() {\n  return useSWR(\"config\", getConfig, {\n    revalidateOnFocus: false,\n    dedupingInterval: 60000,\n    onErrorRetry: (error, _key, _config, revalidate, { retryCount }) => {\n      // Only retry 2 times if backend is unavailable\n      if (retryCount >= 2) return;\n      setTimeout(() => revalidate({ retryCount }), 5000);\n    },\n  });\n}\n\nexport function useBacktests() {\n  return useSWR(\"backtests\", listBacktests, {\n    refreshInterval: 3000,\n  });\n}\n\nexport function useBacktest(id: string | null) {\n  return useSWR(id ? `backtest-${id}` : null, () =>\n    id ? getBacktest(id) : null,\n    {\n      refreshInterval: (data) =>\n        data?.status === \"RUNNING\" || data?.status === \"PENDING\" ? 1500 : 0,\n    }\n  );\n}\n\nexport function useRankings(metric: string) {\n  return useSWR(`rankings-${metric}`, () => getRankings(metric));\n}\n\nexport function useTemplates() {\n  return useSWR(\"templates\", listTemplates, {\n    revalidateOnFocus: false,\n  });\n}\n\nexport function useStockCandles(code: string | null) {\n  return useSWR(\n    code ? `candles-${code}` : null,\n    () => (code ? getStockCandles(code) : null),\n    { revalidateOnFocus: false }\n  );\n}\nexport function useBenchmark(\n  name: string | null,\n  start: string,\n  end: string\n) {\n  return useSWR(\n    name ? `benchmark-${name}-${start}-${end}` : null,\n    () => (name ? getBenchmark(name, start, end) : null),\n    { revalidateOnFocus: false }\n  );\n}\n\nexport function useCompletedBacktests() {\n  return useSWR(\"completed-backtests\", listCompletedBacktests, {\n    revalidateOnFocus: false,\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;;;;AAWO,SAAS;;IACd,OAAO,IAAA,4KAAM,EAAC,UAAU,0HAAS,EAAE;QACjC,mBAAmB;QACnB,kBAAkB;QAClB,YAAY;gCAAE,CAAC,OAAO,MAAM,SAAS,YAAY,EAAE,UAAU,EAAE;gBAC7D,+CAA+C;gBAC/C,IAAI,cAAc,GAAG;gBACrB;wCAAW,IAAM,WAAW;4BAAE;wBAAW;uCAAI;YAC/C;;IACF;AACF;GAVgB;;QACP,4KAAM;;;AAWR,SAAS;;IACd,OAAO,IAAA,4KAAM,EAAC,aAAa,8HAAa,EAAE;QACxC,iBAAiB;IACnB;AACF;IAJgB;;QACP,4KAAM;;;AAKR,SAAS,YAAY,EAAiB;;IAC3C,OAAO,IAAA,4KAAM,EAAC,KAAK,CAAC,SAAS,EAAE,IAAI,GAAG;8BAAM,IAC1C,KAAK,IAAA,4HAAW,EAAC,MAAM;6BACvB;QACE,eAAe;kCAAE,CAAC,OAChB,MAAM,WAAW,aAAa,MAAM,WAAW,YAAY,OAAO;;IACtE;AAEJ;IARgB;;QACP,4KAAM;;;AASR,SAAS,YAAY,MAAc;;IACxC,OAAO,IAAA,4KAAM,EAAC,CAAC,SAAS,EAAE,QAAQ;8BAAE,IAAM,IAAA,4HAAW,EAAC;;AACxD;IAFgB;;QACP,4KAAM;;;AAGR,SAAS;;IACd,OAAO,IAAA,4KAAM,EAAC,aAAa,8HAAa,EAAE;QACxC,mBAAmB;IACrB;AACF;IAJgB;;QACP,4KAAM;;;AAKR,SAAS,gBAAgB,IAAmB;;IACjD,OAAO,IAAA,4KAAM,EACX,OAAO,CAAC,QAAQ,EAAE,MAAM,GAAG;kCAC3B,IAAO,OAAO,IAAA,gIAAe,EAAC,QAAQ;iCACtC;QAAE,mBAAmB;IAAM;AAE/B;IANgB;;QACP,4KAAM;;;AAMR,SAAS,aACd,IAAmB,EACnB,KAAa,EACb,GAAW;;IAEX,OAAO,IAAA,4KAAM,EACX,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;+BAC7C,IAAO,OAAO,IAAA,6HAAY,EAAC,MAAM,OAAO,OAAO;8BAC/C;QAAE,mBAAmB;IAAM;AAE/B;IAVgB;;QAKP,4KAAM;;;AAOR,SAAS;;IACd,OAAO,IAAA,4KAAM,EAAC,uBAAuB,uIAAsB,EAAE;QAC3D,mBAAmB;IACrB;AACF;IAJgB;;QACP,4KAAM"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"rounded-lg border border-border bg-card text-card-foreground\", className)}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex flex-col space-y-1.5 p-5\", className)} {...props} />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3 ref={ref} className={cn(\"text-base font-semibold leading-none tracking-tight\", className)} {...props} />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"px-5 pb-5\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nexport { Card, CardHeader, CardTitle, CardDescription, CardContent };\n"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,gEAAgE;QAC7E,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;;AAErF,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAG,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,uDAAuD;QAAa,GAAG,KAAK;;;;;;;AAE1G,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAE,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;;AAEnF,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,aAAa;QAAa,GAAG,KAAK;;;;;;;AAEjE,YAAY,WAAW,GAAG"}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/components/ui/badge.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-medium transition-colors\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary/15 text-primary\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive: \"border-transparent bg-destructive/15 text-destructive\",\n        outline: \"border-border text-foreground\",\n        success: \"border-transparent bg-[hsl(var(--profit))]/15 text-[hsl(var(--profit))]\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n);\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,gGACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,WAAW;YACX,aAAa;YACb,SAAS;YACT,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/app/results/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { Suspense } from \"react\";\nimport type { ComponentType } from \"react\";\nimport Link from \"next/link\";\nimport { useSearchParams } from \"next/navigation\";\nimport { Loader2, BarChart3, TrendingUp, TrendingDown } from \"lucide-react\";\nimport { useBacktest, useBacktests } from \"@/lib/hooks\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { cn, formatDate, formatNumber, formatPercent } from \"@/lib/utils\";\n\nexport default function ResultsPage() {\n  return (\n    <Suspense\n      fallback={\n        <div className=\"flex h-full items-center justify-center\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n        </div>\n      }\n    >\n      <ResultsContent />\n    </Suspense>\n  );\n}\n\nfunction ResultsContent() {\n  const searchParams = useSearchParams();\n  const backtestId = searchParams.get(\"id\");\n  const { data: listData, isLoading: isListLoading } = useBacktests();\n  const { data, isLoading } = useBacktest(backtestId);\n\n  if (!backtestId) {\n    const completed = (listData?.items || []).filter((item) => item.status === \"COMPLETED\");\n    return (\n      <div className=\"p-6\">\n        <div className=\"mb-6\">\n          <h2 className=\"text-xl font-semibold text-foreground\">结果分析</h2>\n          <p className=\"mt-1 text-sm text-muted-foreground\">请选择一个已完成的回测任务查看结果</p>\n        </div>\n        {isListLoading ? (\n          <div className=\"flex h-48 items-center justify-center\">\n            <Loader2 className=\"h-7 w-7 animate-spin text-primary\" />\n          </div>\n        ) : completed.length > 0 ? (\n          <div className=\"grid gap-3\">\n            {completed.map((item) => (\n              <Link key={item.id} href={`/results?id=${item.id}`}>\n                <Card className=\"transition-colors hover:border-primary/50\">\n                  <CardContent className=\"py-4\">\n                    <div className=\"flex items-center justify-between gap-3\">\n                      <div className=\"min-w-0\">\n                        <p className=\"truncate text-sm font-medium text-foreground\">{item.name}</p>\n                        <p className=\"mt-1 text-xs text-muted-foreground\">\n                          {formatDate(item.start_date)} ~ {formatDate(item.end_date)}\n                        </p>\n                      </div>\n                      <Badge variant=\"secondary\">查看结果</Badge>\n                    </div>\n                  </CardContent>\n                </Card>\n              </Link>\n            ))}\n          </div>\n        ) : (\n          <Card>\n            <CardContent className=\"py-12 text-center\">\n              <p className=\"text-sm text-muted-foreground\">暂无已完成回测任务</p>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n    );\n  }\n\n  if (isLoading || !data) {\n    return (\n      <div className=\"flex h-full items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  if (data.status !== \"COMPLETED\") {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <p className=\"text-sm text-muted-foreground\">\n              该任务当前状态为 <span className=\"font-semibold text-foreground\">{data.status}</span>，完成后可查看结果\n            </p>\n            <Link href={`/tasks?active=${data.id}`} className=\"mt-4 inline-block text-sm text-primary hover:underline\">\n              前往任务详情\n            </Link>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const metrics = data.metrics || {};\n  const totalReturn = Number(metrics.total_return_pct || 0);\n  const maxDrawdown = Number(metrics.max_drawdown_pct || 0);\n  const winRate = Number(metrics.win_rate_pct || 0);\n  const sharpe = Number(metrics.sharpe_ratio || 0);\n  const finalValue = Number(metrics.final_value || 0);\n  const score = Number(metrics.score || 0);\n\n  const bestStock = data.result?.best_stock;\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-6 flex items-start justify-between gap-3\">\n        <div>\n          <h2 className=\"text-xl font-semibold text-foreground\">结果分析</h2>\n          <p className=\"mt-1 text-sm text-muted-foreground\">\n            {data.name} · {formatDate(data.start_date)} ~ {formatDate(data.end_date)}\n          </p>\n        </div>\n        <Link href={`/tasks?active=${data.id}`} className=\"text-sm text-primary hover:underline\">\n          返回任务详情\n        </Link>\n      </div>\n\n      <div className=\"grid gap-3 sm:grid-cols-2 lg:grid-cols-3\">\n        <MetricCard\n          label=\"总收益率\"\n          value={formatPercent(totalReturn)}\n          positive={totalReturn >= 0}\n          icon={totalReturn >= 0 ? TrendingUp : TrendingDown}\n        />\n        <MetricCard\n          label=\"最大回撤\"\n          value={formatPercent(maxDrawdown)}\n          positive={false}\n          icon={TrendingDown}\n        />\n        <MetricCard label=\"胜率\" value={formatPercent(winRate)} positive={winRate >= 50} icon={BarChart3} />\n        <MetricCard label=\"夏普比率\" value={sharpe.toFixed(2)} positive={sharpe >= 0} icon={BarChart3} />\n        <MetricCard label=\"最终净值\" value={formatNumber(finalValue)} positive={finalValue >= 0} icon={BarChart3} />\n        <MetricCard label=\"策略评分\" value={score.toFixed(2)} positive={score >= 5} icon={BarChart3} />\n      </div>\n\n      <div className=\"mt-4 grid gap-4 lg:grid-cols-2\">\n        <Card>\n          <CardHeader>\n            <CardTitle>最佳个股</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {bestStock ? (\n              <div className=\"space-y-1\">\n                <p className=\"text-sm text-muted-foreground\">代码</p>\n                <p className=\"font-mono text-base font-semibold text-foreground\">{bestStock.code}</p>\n                <p\n                  className={cn(\n                    \"text-sm font-medium\",\n                    Number(bestStock.net_pnl) >= 0 ? \"text-[hsl(var(--profit))]\" : \"text-[hsl(var(--loss))]\"\n                  )}\n                >\n                  净利润: {formatNumber(Number(bestStock.net_pnl))}\n                </p>\n              </div>\n            ) : (\n              <p className=\"text-sm text-muted-foreground\">暂无数据</p>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>任务信息</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-2 text-sm\">\n            <InfoRow label=\"任务 ID\" value={`${data.id.slice(0, 8)}...`} />\n            <InfoRow label=\"创建时间\" value={formatDate(data.created_at)} />\n            <InfoRow label=\"完成时间\" value={data.finished_at ? formatDate(data.finished_at) : \"-\"} />\n            <InfoRow label=\"状态\" value={data.status} />\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n\nfunction MetricCard({\n  label,\n  value,\n  positive,\n  icon: Icon,\n}: {\n  label: string;\n  value: string;\n  positive: boolean;\n  icon: ComponentType<{ className?: string }>;\n}) {\n  return (\n    <Card>\n      <CardContent className=\"py-4\">\n        <div className=\"flex items-center justify-between\">\n          <p className=\"text-xs text-muted-foreground\">{label}</p>\n          <Icon className=\"h-4 w-4 text-muted-foreground\" />\n        </div>\n        <p\n          className={cn(\n            \"mt-2 text-xl font-semibold font-mono\",\n            positive ? \"text-[hsl(var(--profit))]\" : \"text-[hsl(var(--loss))]\"\n          )}\n        >\n          {value}\n        </p>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction InfoRow({ label, value }: { label: string; value: string }) {\n  return (\n    <div className=\"flex items-center justify-between gap-3\">\n      <span className=\"text-muted-foreground\">{label}</span>\n      <span className=\"font-medium text-foreground\">{value}</span>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}