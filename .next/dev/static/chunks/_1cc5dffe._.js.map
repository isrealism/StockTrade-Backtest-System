{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/components/ui/badge.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-medium transition-colors\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary/15 text-primary\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive: \"border-transparent bg-destructive/15 text-destructive\",\n        outline: \"border-border text-foreground\",\n        success: \"border-transparent bg-[hsl(var(--profit))]/15 text-[hsl(var(--profit))]\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n);\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,gGACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,WAAW;YACX,aAAa;YACb,SAAS;YACT,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/components/ui/progress.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\";\nimport { cn } from \"@/lib/utils\";\n\nconst Progress = React.forwardRef<\n  React.ComponentRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-2 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n));\nProgress.displayName = ProgressPrimitive.Root.displayName;\n\nexport { Progress };\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,6LAAC,+KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG,+KAAsB,CAAC,WAAW"}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/components/tasks/task-list.tsx"],"sourcesContent":["\"use client\";\n\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { cn, formatDate, formatPercent } from \"@/lib/utils\";\nimport type { BacktestSummary } from \"@/lib/api\";\nimport {\n  Clock,\n  CheckCircle2,\n  XCircle,\n  Loader2,\n  Ban,\n  ChevronRight,\n} from \"lucide-react\";\n\nconst STATUS_CONFIG: Record<\n  string,\n  { label: string; icon: typeof Clock; color: string }\n> = {\n  PENDING: { label: \"等待中\", icon: Clock, color: \"text-chart-3\" },\n  RUNNING: { label: \"运行中\", icon: Loader2, color: \"text-primary\" },\n  COMPLETED: { label: \"已完成\", icon: CheckCircle2, color: \"text-[hsl(var(--profit))]\" },\n  FAILED: { label: \"失败\", icon: XCircle, color: \"text-[hsl(var(--loss))]\" },\n  CANCELLED: { label: \"已取消\", icon: Ban, color: \"text-muted-foreground\" },\n};\n\ninterface TaskListProps {\n  tasks: BacktestSummary[];\n  activeId: string | null;\n  onSelect: (id: string) => void;\n}\n\nexport function TaskList({ tasks, activeId, onSelect }: TaskListProps) {\n  if (tasks.length === 0) {\n    return (\n      <div className=\"flex h-40 flex-col items-center justify-center text-muted-foreground\">\n        <Clock className=\"mb-2 h-8 w-8\" />\n        <p className=\"text-sm\">暂无回测任务</p>\n        <p className=\"mt-1 text-xs\">在回测配置页面创建新任务</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-1\">\n      {tasks.map((task) => {\n        const config = STATUS_CONFIG[task.status] || STATUS_CONFIG.PENDING;\n        const Icon = config.icon;\n        const isActive = task.id === activeId;\n\n        return (\n          <button\n            key={task.id}\n            onClick={() => onSelect(task.id)}\n            className={cn(\n              \"flex w-full items-center gap-3 rounded-lg border px-4 py-3 text-left transition-all\",\n              isActive\n                ? \"border-primary/30 bg-primary/5\"\n                : \"border-border bg-card hover:bg-secondary/50\"\n            )}\n          >\n            <Icon\n              className={cn(\n                \"h-4 w-4 shrink-0\",\n                config.color,\n                task.status === \"RUNNING\" && \"animate-spin\"\n              )}\n            />\n            <div className=\"min-w-0 flex-1\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"truncate text-sm font-medium text-foreground\">\n                  {task.name}\n                </span>\n                <Badge\n                  variant={\n                    task.status === \"COMPLETED\"\n                      ? \"success\"\n                      : task.status === \"FAILED\"\n                      ? \"destructive\"\n                      : \"secondary\"\n                  }\n                  className=\"shrink-0 text-[10px]\"\n                >\n                  {config.label}\n                </Badge>\n              </div>\n              <div className=\"mt-1 flex items-center gap-3 text-xs text-muted-foreground\">\n                <span>\n                  {task.start_date} ~ {task.end_date}\n                </span>\n                {task.status === \"RUNNING\" && (\n                  <span className=\"text-primary\">\n                    {task.progress.toFixed(1)}%\n                  </span>\n                )}\n                {task.metrics && (\n                  <span\n                    className={cn(\n                      (task.metrics.total_return_pct ?? 0) >= 0\n                        ? \"text-[hsl(var(--profit))]\"\n                        : \"text-[hsl(var(--loss))]\"\n                    )}\n                  >\n                    {formatPercent(task.metrics.total_return_pct ?? 0)}\n                  </span>\n                )}\n              </div>\n              {task.status === \"RUNNING\" && (\n                <Progress value={task.progress} className=\"mt-2 h-1\" />\n              )}\n            </div>\n            <ChevronRight className=\"h-4 w-4 shrink-0 text-muted-foreground\" />\n          </button>\n        );\n      })}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;;;;;;AAgBA,MAAM,gBAGF;IACF,SAAS;QAAE,OAAO;QAAO,MAAM,gNAAK;QAAE,OAAO;IAAe;IAC5D,SAAS;QAAE,OAAO;QAAO,MAAM,+NAAO;QAAE,OAAO;IAAe;IAC9D,WAAW;QAAE,OAAO;QAAO,MAAM,wOAAY;QAAE,OAAO;IAA4B;IAClF,QAAQ;QAAE,OAAO;QAAM,MAAM,0NAAO;QAAE,OAAO;IAA0B;IACvE,WAAW;QAAE,OAAO;QAAO,MAAM,0MAAG;QAAE,OAAO;IAAwB;AACvE;AAQO,SAAS,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAiB;IACnE,IAAI,MAAM,MAAM,KAAK,GAAG;QACtB,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC,gNAAK;oBAAC,WAAU;;;;;;8BACjB,6LAAC;oBAAE,WAAU;8BAAU;;;;;;8BACvB,6LAAC;oBAAE,WAAU;8BAAe;;;;;;;;;;;;IAGlC;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC;YACV,MAAM,SAAS,aAAa,CAAC,KAAK,MAAM,CAAC,IAAI,cAAc,OAAO;YAClE,MAAM,OAAO,OAAO,IAAI;YACxB,MAAM,WAAW,KAAK,EAAE,KAAK;YAE7B,qBACE,6LAAC;gBAEC,SAAS,IAAM,SAAS,KAAK,EAAE;gBAC/B,WAAW,IAAA,qHAAE,EACX,uFACA,WACI,mCACA;;kCAGN,6LAAC;wBACC,WAAW,IAAA,qHAAE,EACX,oBACA,OAAO,KAAK,EACZ,KAAK,MAAM,KAAK,aAAa;;;;;;kCAGjC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDACb,KAAK,IAAI;;;;;;kDAEZ,6LAAC,sIAAK;wCACJ,SACE,KAAK,MAAM,KAAK,cACZ,YACA,KAAK,MAAM,KAAK,WAChB,gBACA;wCAEN,WAAU;kDAET,OAAO,KAAK;;;;;;;;;;;;0CAGjB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;4CACE,KAAK,UAAU;4CAAC;4CAAI,KAAK,QAAQ;;;;;;;oCAEnC,KAAK,MAAM,KAAK,2BACf,6LAAC;wCAAK,WAAU;;4CACb,KAAK,QAAQ,CAAC,OAAO,CAAC;4CAAG;;;;;;;oCAG7B,KAAK,OAAO,kBACX,6LAAC;wCACC,WAAW,IAAA,qHAAE,EACX,CAAC,KAAK,OAAO,CAAC,gBAAgB,IAAI,CAAC,KAAK,IACpC,8BACA;kDAGL,IAAA,gIAAa,EAAC,KAAK,OAAO,CAAC,gBAAgB,IAAI;;;;;;;;;;;;4BAIrD,KAAK,MAAM,KAAK,2BACf,6LAAC,4IAAQ;gCAAC,OAAO,KAAK,QAAQ;gCAAE,WAAU;;;;;;;;;;;;kCAG9C,6LAAC,yOAAY;wBAAC,WAAU;;;;;;;eA3DnB,KAAK,EAAE;;;;;QA8DlB;;;;;;AAGN;KArFgB"}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"rounded-lg border border-border bg-card text-card-foreground\", className)}\n    {...props}\n  />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex flex-col space-y-1.5 p-5\", className)} {...props} />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3 ref={ref} className={cn(\"text-base font-semibold leading-none tracking-tight\", className)} {...props} />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"px-5 pb-5\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nexport { Card, CardHeader, CardTitle, CardDescription, CardContent };\n"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,gEAAgE;QAC7E,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;;AAErF,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAG,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,uDAAuD;QAAa,GAAG,KAAK;;;;;;;AAE1G,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAE,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;;AAEnF,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,aAAa;QAAa,GAAG,KAAK;;;;;;;AAEjE,YAAY,WAAW,GAAG"}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline: \"border border-border bg-transparent hover:bg-accent hover:text-accent-foreground\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,uOACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,2KAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 468, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\";\nimport { cn } from \"@/lib/utils\";\n\nconst ScrollArea = React.forwardRef<\n  React.ComponentRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollAreaPrimitive.ScrollAreaScrollbar\n      orientation=\"vertical\"\n      className=\"flex touch-none select-none transition-colors h-full w-2 border-l border-l-transparent p-[1px]\"\n    >\n      <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n    </ScrollAreaPrimitive.ScrollAreaScrollbar>\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n));\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName;\n\nexport { ScrollArea };\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,2BAAa,2KAAgB,MAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,qLAAwB;QACvB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;0BAET,6LAAC,yLAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,6LAAC,oMAAuC;gBACtC,aAAY;gBACZ,WAAU;0BAEV,cAAA,6LAAC,gMAAmC;oBAAC,WAAU;;;;;;;;;;;0BAEjD,6LAAC,uLAA0B;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,qLAAwB,CAAC,WAAW"}},
    {"offset": {"line": 533, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/lib/api.ts"],"sourcesContent":["const API_BASE = process.env.NEXT_PUBLIC_API_URL || \"\";\n\nasync function fetchAPI<T>(path: string, options?: RequestInit): Promise<T> {\n  const res = await fetch(`${API_BASE}${path}`, {\n    ...options,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...options?.headers,\n    },\n  });\n  if (!res.ok) {\n    const error = await res.json().catch(() => ({ detail: res.statusText }));\n    throw new Error(error.detail || \"API request failed\");\n  }\n  return res.json();\n}\n\n// Types\nexport interface SelectorConfig {\n  class: string;\n  alias: string;\n  activate: boolean;\n  params: Record<string, unknown>;\n}\n\nexport interface SellStrategyConfig {\n  description: string;\n  name: string;\n  combination_logic?: string;\n  strategies?: Array<{\n    class: string;\n    params: Record<string, unknown>;\n  }>;\n  class?: string;\n  params?: Record<string, unknown>;\n}\n\nexport interface BacktestPayload {\n  name?: string;\n  start_date: string;\n  end_date: string;\n  initial_capital?: number;\n  max_positions?: number;\n  position_sizing?: string;\n  commission_rate?: number;\n  stamp_tax_rate?: number;\n  slippage_rate?: number;\n  sell_strategy_name?: string;\n  sell_strategy_config?: unknown;\n  buy_config?: unknown;\n  stock_pool?: { type: string; codes?: string[] };\n  lookback_days?: number;\n}\n\nexport interface BacktestSummary {\n  id: string;\n  name: string;\n  status: \"PENDING\" | \"RUNNING\" | \"COMPLETED\" | \"FAILED\" | \"CANCELLED\";\n  progress: number;\n  created_at: string;\n  started_at: string | null;\n  finished_at: string | null;\n  start_date: string;\n  end_date: string;\n  metrics: Record<string, number> | null;\n  error: string | null;\n}\n\nexport interface BacktestDetail extends BacktestSummary {\n  payload: BacktestPayload | null;\n  result: BacktestResult | null;\n  logs: Array<{ ts: string; message: string }>;\n}\n\nexport interface BacktestResult {\n  equity_curve: Array<Record<string, unknown>>;\n  trades: Array<Record<string, unknown>>;\n  analysis: Record<string, unknown>;\n  performance?: Record<string, unknown>;\n  strategy_score: { score: number; components: Record<string, number> };\n  best_trade: Record<string, unknown> | null;\n  best_stock: { code: string; net_pnl: number } | null;\n}\n\nexport interface Template {\n  id: string;\n  name: string;\n  created_at: string;\n  payload: BacktestPayload;\n}\n\nexport interface CandleData {\n  time: string;\n  open: number;\n  high: number;\n  low: number;\n  close: number;\n  volume: number;\n}\n\n// API Functions\nexport async function getConfig() {\n  return fetchAPI<{\n    selectors: SelectorConfig[];\n    sell_strategies: Record<string, SellStrategyConfig>;\n  }>(\"/api/config\");\n}\n\nexport async function listBacktests() {\n  return fetchAPI<{ items: BacktestSummary[] }>(\"/api/backtests\");\n}\n\nexport async function createBacktest(payload: BacktestPayload) {\n  return fetchAPI<{ id: string; status: string }>(\"/api/backtests\", {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  });\n}\n\nexport async function getBacktest(id: string) {\n  return fetchAPI<BacktestDetail>(`/api/backtests/${id}`);\n}\n\nexport async function cancelBacktest(id: string) {\n  return fetchAPI<{ id: string; status: string }>(\n    `/api/backtests/${id}/cancel`,\n    { method: \"POST\" }\n  );\n}\n\nexport async function listTemplates() {\n  return fetchAPI<{ items: Template[] }>(\"/api/templates\");\n}\n\nexport async function createTemplate(payload: Record<string, unknown>) {\n  return fetchAPI<{ id: string }>(\"/api/templates\", {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  });\n}\n\nexport async function deleteTemplate(id: string) {\n  return fetchAPI<{ id: string; status: string }>(`/api/templates/${id}`, {\n    method: \"DELETE\",\n  });\n}\n\nexport async function getStockCandles(code: string) {\n  return fetchAPI<{ candles: CandleData[] }>(`/api/stocks/${code}/candles`);\n}\n\nexport async function getRankings(metric = \"score\") {\n  return fetchAPI<{\n    items: Array<{\n      id: string;\n      name: string;\n      created_at: string;\n      metrics: Record<string, number>;\n      rank_value: number;\n    }>;\n  }>(`/api/rankings?metric=${metric}`);\n}\n\nexport async function getBenchmark(name: string, start: string, end: string) {\n  return fetchAPI<{ series: Array<{ date: string; nav: number }> }>(\n    `/api/benchmark?name=${encodeURIComponent(name)}&start=${start}&end=${end}`\n  );\n}\n\nexport async function listCompletedBacktests() {\n  const data = await listBacktests();\n  return {\n    items: data.items.filter((item) => item.status === \"COMPLETED\"),\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAiB;AAAjB,MAAM,WAAW,6DAAmC;AAEpD,eAAe,SAAY,IAAY,EAAE,OAAqB;IAC5D,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC5C,GAAG,OAAO;QACV,SAAS;YACP,gBAAgB;YAChB,GAAG,SAAS,OAAO;QACrB;IACF;IACA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;gBAAE,QAAQ,IAAI,UAAU;YAAC,CAAC;QACtE,MAAM,IAAI,MAAM,MAAM,MAAM,IAAI;IAClC;IACA,OAAO,IAAI,IAAI;AACjB;AAsFO,eAAe;IACpB,OAAO,SAGJ;AACL;AAEO,eAAe;IACpB,OAAO,SAAuC;AAChD;AAEO,eAAe,eAAe,OAAwB;IAC3D,OAAO,SAAyC,kBAAkB;QAChE,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;AACF;AAEO,eAAe,YAAY,EAAU;IAC1C,OAAO,SAAyB,CAAC,eAAe,EAAE,IAAI;AACxD;AAEO,eAAe,eAAe,EAAU;IAC7C,OAAO,SACL,CAAC,eAAe,EAAE,GAAG,OAAO,CAAC,EAC7B;QAAE,QAAQ;IAAO;AAErB;AAEO,eAAe;IACpB,OAAO,SAAgC;AACzC;AAEO,eAAe,eAAe,OAAgC;IACnE,OAAO,SAAyB,kBAAkB;QAChD,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;AACF;AAEO,eAAe,eAAe,EAAU;IAC7C,OAAO,SAAyC,CAAC,eAAe,EAAE,IAAI,EAAE;QACtE,QAAQ;IACV;AACF;AAEO,eAAe,gBAAgB,IAAY;IAChD,OAAO,SAAoC,CAAC,YAAY,EAAE,KAAK,QAAQ,CAAC;AAC1E;AAEO,eAAe,YAAY,SAAS,OAAO;IAChD,OAAO,SAQJ,CAAC,qBAAqB,EAAE,QAAQ;AACrC;AAEO,eAAe,aAAa,IAAY,EAAE,KAAa,EAAE,GAAW;IACzE,OAAO,SACL,CAAC,oBAAoB,EAAE,mBAAmB,MAAM,OAAO,EAAE,MAAM,KAAK,EAAE,KAAK;AAE/E;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM;IACnB,OAAO;QACL,OAAO,KAAK,KAAK,CAAC,MAAM,CAAC,CAAC,OAAS,KAAK,MAAM,KAAK;IACrD;AACF"}},
    {"offset": {"line": 633, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/lib/hooks.ts"],"sourcesContent":["import useSWR from \"swr\";\nimport {\n  getConfig,\n  listBacktests,\n  getBacktest,\n  getRankings,\n  listTemplates,\n  getStockCandles,\n  getBenchmark,\n  listCompletedBacktests,\n} from \"./api\";\n\nexport function useConfig() {\n  return useSWR(\"config\", getConfig, {\n    revalidateOnFocus: false,\n    dedupingInterval: 60000,\n    onErrorRetry: (error, _key, _config, revalidate, { retryCount }) => {\n      // Only retry 2 times if backend is unavailable\n      if (retryCount >= 2) return;\n      setTimeout(() => revalidate({ retryCount }), 5000);\n    },\n  });\n}\n\nexport function useBacktests() {\n  return useSWR(\"backtests\", listBacktests, {\n    refreshInterval: 3000,\n  });\n}\n\nexport function useBacktest(id: string | null) {\n  return useSWR(id ? `backtest-${id}` : null, () =>\n    id ? getBacktest(id) : null,\n    {\n      refreshInterval: (data) =>\n        data?.status === \"RUNNING\" || data?.status === \"PENDING\" ? 1500 : 0,\n    }\n  );\n}\n\nexport function useRankings(metric: string) {\n  return useSWR(`rankings-${metric}`, () => getRankings(metric));\n}\n\nexport function useTemplates() {\n  return useSWR(\"templates\", listTemplates, {\n    revalidateOnFocus: false,\n  });\n}\n\nexport function useStockCandles(code: string | null) {\n  return useSWR(\n    code ? `candles-${code}` : null,\n    () => (code ? getStockCandles(code) : null),\n    { revalidateOnFocus: false }\n  );\n}\nexport function useBenchmark(\n  name: string | null,\n  start: string,\n  end: string\n) {\n  return useSWR(\n    name ? `benchmark-${name}-${start}-${end}` : null,\n    () => (name ? getBenchmark(name, start, end) : null),\n    { revalidateOnFocus: false }\n  );\n}\n\nexport function useCompletedBacktests() {\n  return useSWR(\"completed-backtests\", listCompletedBacktests, {\n    revalidateOnFocus: false,\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;;;;AAWO,SAAS;;IACd,OAAO,IAAA,4KAAM,EAAC,UAAU,0HAAS,EAAE;QACjC,mBAAmB;QACnB,kBAAkB;QAClB,YAAY;gCAAE,CAAC,OAAO,MAAM,SAAS,YAAY,EAAE,UAAU,EAAE;gBAC7D,+CAA+C;gBAC/C,IAAI,cAAc,GAAG;gBACrB;wCAAW,IAAM,WAAW;4BAAE;wBAAW;uCAAI;YAC/C;;IACF;AACF;GAVgB;;QACP,4KAAM;;;AAWR,SAAS;;IACd,OAAO,IAAA,4KAAM,EAAC,aAAa,8HAAa,EAAE;QACxC,iBAAiB;IACnB;AACF;IAJgB;;QACP,4KAAM;;;AAKR,SAAS,YAAY,EAAiB;;IAC3C,OAAO,IAAA,4KAAM,EAAC,KAAK,CAAC,SAAS,EAAE,IAAI,GAAG;8BAAM,IAC1C,KAAK,IAAA,4HAAW,EAAC,MAAM;6BACvB;QACE,eAAe;kCAAE,CAAC,OAChB,MAAM,WAAW,aAAa,MAAM,WAAW,YAAY,OAAO;;IACtE;AAEJ;IARgB;;QACP,4KAAM;;;AASR,SAAS,YAAY,MAAc;;IACxC,OAAO,IAAA,4KAAM,EAAC,CAAC,SAAS,EAAE,QAAQ;8BAAE,IAAM,IAAA,4HAAW,EAAC;;AACxD;IAFgB;;QACP,4KAAM;;;AAGR,SAAS;;IACd,OAAO,IAAA,4KAAM,EAAC,aAAa,8HAAa,EAAE;QACxC,mBAAmB;IACrB;AACF;IAJgB;;QACP,4KAAM;;;AAKR,SAAS,gBAAgB,IAAmB;;IACjD,OAAO,IAAA,4KAAM,EACX,OAAO,CAAC,QAAQ,EAAE,MAAM,GAAG;kCAC3B,IAAO,OAAO,IAAA,gIAAe,EAAC,QAAQ;iCACtC;QAAE,mBAAmB;IAAM;AAE/B;IANgB;;QACP,4KAAM;;;AAMR,SAAS,aACd,IAAmB,EACnB,KAAa,EACb,GAAW;;IAEX,OAAO,IAAA,4KAAM,EACX,OAAO,CAAC,UAAU,EAAE,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG;+BAC7C,IAAO,OAAO,IAAA,6HAAY,EAAC,MAAM,OAAO,OAAO;8BAC/C;QAAE,mBAAmB;IAAM;AAE/B;IAVgB;;QAKP,4KAAM;;;AAOR,SAAS;;IACd,OAAO,IAAA,4KAAM,EAAC,uBAAuB,uIAAsB,EAAE;QAC3D,mBAAmB;IACrB;AACF;IAJgB;;QACP,4KAAM"}},
    {"offset": {"line": 771, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/components/tasks/task-detail.tsx"],"sourcesContent":["\"use client\";\n\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { useBacktest } from \"@/lib/hooks\";\nimport { cancelBacktest } from \"@/lib/api\";\nimport { cn, formatDate, formatPercent, formatNumber } from \"@/lib/utils\";\nimport {\n  Square,\n  ExternalLink,\n  Loader2,\n  Terminal,\n  BarChart3,\n  Clock,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useState } from \"react\";\n\ninterface TaskDetailProps {\n  backtestId: string;\n}\n\nexport function TaskDetail({ backtestId }: TaskDetailProps) {\n  const { data, isLoading } = useBacktest(backtestId);\n  const [cancelling, setCancelling] = useState(false);\n\n  async function handleCancel() {\n    setCancelling(true);\n    try {\n      await cancelBacktest(backtestId);\n    } finally {\n      setCancelling(false);\n    }\n  }\n\n  if (isLoading || !data) {\n    return (\n      <div className=\"flex h-60 items-center justify-center\">\n        <Loader2 className=\"h-6 w-6 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  const isRunning = data.status === \"RUNNING\" || data.status === \"PENDING\";\n  const isCompleted = data.status === \"COMPLETED\";\n  const isFailed = data.status === \"FAILED\";\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header */}\n      <div className=\"flex items-start justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-foreground\">{data.name}</h3>\n          <p className=\"mt-0.5 text-xs text-muted-foreground\">\n            ID: {data.id.slice(0, 8)}... | 创建于 {formatDate(data.created_at)}\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {isRunning && (\n            <Button\n              variant=\"destructive\"\n              size=\"sm\"\n              onClick={handleCancel}\n              disabled={cancelling}\n            >\n              {cancelling ? (\n                <Loader2 className=\"mr-1.5 h-3.5 w-3.5 animate-spin\" />\n              ) : (\n                <Square className=\"mr-1.5 h-3.5 w-3.5\" />\n              )}\n              中止回测\n            </Button>\n          )}\n          {isCompleted && (\n            <Button asChild size=\"sm\">\n              <Link href={`/results?id=${backtestId}`}>\n                <BarChart3 className=\"mr-1.5 h-3.5 w-3.5\" />\n                查看结果\n              </Link>\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Progress */}\n      {isRunning && (\n        <Card>\n          <CardContent className=\"py-4\">\n            <div className=\"flex items-center justify-between text-sm\">\n              <span className=\"text-muted-foreground\">回测进度</span>\n              <span className=\"font-mono text-primary\">\n                {data.progress.toFixed(1)}%\n              </span>\n            </div>\n            <Progress value={data.progress} className=\"mt-2\" />\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Error */}\n      {isFailed && data.error && (\n        <Card className=\"border-destructive/30 bg-destructive/5\">\n          <CardContent className=\"py-4\">\n            <p className=\"text-sm text-[hsl(var(--loss))]\">\n              Error: {data.error}\n            </p>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Quick Metrics */}\n      {isCompleted && data.metrics && (\n        <div className=\"grid grid-cols-2 gap-3 sm:grid-cols-4\">\n          {[\n            {\n              label: \"总收益率\",\n              value: formatPercent(data.metrics.total_return_pct ?? 0),\n              isPositive: (data.metrics.total_return_pct ?? 0) >= 0,\n            },\n            {\n              label: \"最大回撤\",\n              value: formatPercent(data.metrics.max_drawdown_pct ?? 0),\n              isPositive: false,\n            },\n            {\n              label: \"胜率\",\n              value: formatPercent(data.metrics.win_rate_pct ?? 0),\n              isPositive: (data.metrics.win_rate_pct ?? 0) >= 50,\n            },\n            {\n              label: \"策略评分\",\n              value: (data.metrics.score ?? 0).toFixed(2),\n              isPositive: (data.metrics.score ?? 0) >= 5,\n            },\n          ].map((metric) => (\n            <Card key={metric.label}>\n              <CardContent className=\"py-3\">\n                <p className=\"text-xs text-muted-foreground\">{metric.label}</p>\n                <p\n                  className={cn(\n                    \"mt-1 text-lg font-semibold font-mono\",\n                    metric.label === \"最大回撤\"\n                      ? \"text-[hsl(var(--loss))]\"\n                      : metric.isPositive\n                      ? \"text-[hsl(var(--profit))]\"\n                      : \"text-[hsl(var(--loss))]\"\n                  )}\n                >\n                  {metric.value}\n                </p>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {/* Log Panel */}\n      <Card>\n        <CardHeader className=\"py-3\">\n          <CardTitle className=\"flex items-center gap-2 text-sm\">\n            <Terminal className=\"h-4 w-4 text-primary\" />\n            实时日志\n            {data.logs && (\n              <Badge variant=\"secondary\" className=\"text-[10px]\">\n                {data.logs.length} 条\n              </Badge>\n            )}\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ScrollArea className=\"h-64 rounded-md bg-background p-3\">\n            {data.logs && data.logs.length > 0 ? (\n              <div className=\"space-y-0.5 font-mono text-xs\">\n                {data.logs.map((log, idx) => (\n                  <div key={idx} className=\"flex gap-2\">\n                    <span className=\"shrink-0 text-muted-foreground\">\n                      {formatDate(log.ts).slice(11, 19) || log.ts.slice(11, 19)}\n                    </span>\n                    <span className=\"text-foreground\">{log.message}</span>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"flex h-full items-center justify-center text-muted-foreground\">\n                <p className=\"text-xs\">\n                  {isRunning ? \"等待日志输出...\" : \"暂无日志\"}\n                </p>\n              </div>\n            )}\n          </ScrollArea>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1196, "column": 0}, "map": {"version":3,"sources":["file:///Users/pengchuhan/StockTrade-Backtest-System/app/tasks/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { Suspense, useState, useEffect } from \"react\";\nimport { useSearchParams } from \"next/navigation\";\nimport { TaskList } from \"@/components/tasks/task-list\";\nimport { TaskDetail } from \"@/components/tasks/task-detail\";\nimport { useBacktests } from \"@/lib/hooks\";\nimport { Loader2, ListChecks } from \"lucide-react\";\n\nexport default function TasksPage() {\n  return (\n    <Suspense\n      fallback={\n        <div className=\"flex h-full items-center justify-center\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n        </div>\n      }\n    >\n      <TasksContent />\n    </Suspense>\n  );\n}\n\nfunction TasksContent() {\n  const searchParams = useSearchParams();\n  const { data, isLoading } = useBacktests();\n  const [activeId, setActiveId] = useState<string | null>(null);\n\n  useEffect(() => {\n    const paramId = searchParams.get(\"active\");\n    if (paramId) {\n      setActiveId(paramId);\n    } else if (data?.items && data.items.length > 0 && !activeId) {\n      setActiveId(data.items[0].id);\n    }\n  }, [searchParams, data, activeId]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex h-full items-center justify-center\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  const tasks = data?.items || [];\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-xl font-semibold text-foreground\">回测任务</h2>\n        <p className=\"mt-1 text-sm text-muted-foreground\">\n          管理回测任务，查看实时进度与日志\n        </p>\n      </div>\n\n      <div className=\"grid gap-6 lg:grid-cols-[360px_1fr]\">\n        {/* Task List */}\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n            <ListChecks className=\"h-4 w-4\" />\n            <span>共 {tasks.length} 个任务</span>\n          </div>\n          <TaskList\n            tasks={tasks}\n            activeId={activeId}\n            onSelect={setActiveId}\n          />\n        </div>\n\n        {/* Task Detail */}\n        <div>\n          {activeId ? (\n            <TaskDetail backtestId={activeId} />\n          ) : (\n            <div className=\"flex h-60 flex-col items-center justify-center text-muted-foreground\">\n              <ListChecks className=\"mb-2 h-8 w-8\" />\n              <p className=\"text-sm\">选择一个任务查看详情</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;;;AAPA;;;;;;;AASe,SAAS;IACtB,qBACE,6LAAC,yKAAQ;QACP,wBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,+NAAO;gBAAC,WAAU;;;;;;;;;;;kBAIvB,cAAA,6LAAC;;;;;;;;;;AAGP;KAZwB;AAcxB,SAAS;;IACP,MAAM,eAAe,IAAA,wJAAe;IACpC,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,+HAAY;IACxC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAgB;IAExD,IAAA,0KAAS;kCAAC;YACR,MAAM,UAAU,aAAa,GAAG,CAAC;YACjC,IAAI,SAAS;gBACX,YAAY;YACd,OAAO,IAAI,MAAM,SAAS,KAAK,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,UAAU;gBAC5D,YAAY,KAAK,KAAK,CAAC,EAAE,CAAC,EAAE;YAC9B;QACF;iCAAG;QAAC;QAAc;QAAM;KAAS;IAEjC,IAAI,WAAW;QACb,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC,+NAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,MAAM,QAAQ,MAAM,SAAS,EAAE;IAE/B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAwC;;;;;;kCACtD,6LAAC;wBAAE,WAAU;kCAAqC;;;;;;;;;;;;0BAKpD,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,mOAAU;wCAAC,WAAU;;;;;;kDACtB,6LAAC;;4CAAK;4CAAG,MAAM,MAAM;4CAAC;;;;;;;;;;;;;0CAExB,6LAAC,mJAAQ;gCACP,OAAO;gCACP,UAAU;gCACV,UAAU;;;;;;;;;;;;kCAKd,6LAAC;kCACE,yBACC,6LAAC,uJAAU;4BAAC,YAAY;;;;;iDAExB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,mOAAU;oCAAC,WAAU;;;;;;8CACtB,6LAAC;oCAAE,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOrC;GA7DS;;QACc,wJAAe;QACR,+HAAY;;;MAFjC"}}]
}